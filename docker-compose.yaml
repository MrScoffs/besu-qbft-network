version: "3.8"

services:
  node1:
    image: besu-image-local:2.0
    container_name: node1
    network_mode: "host"
    command: >
      --data-path=/opt/besu/data
      --genesis-file=/opt/besu/genesis.json
      --rpc-http-enabled
      --rpc-http-api=ETH,NET,QBFT,ADMIN
      --host-allowlist="*"
      --rpc-http-cors-origins="all"
      --profile=ENTERPRISE
      --metrics-enabled
      --rpc-http-host=0.0.0.0
      --rpc-http-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --rpc-ws-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --data-storage-format=BONSAI 
      --tx-pool-min-gas-price=0 
      --min-gas-price=0 
      --rpc-ws-enabled=true 
      --rpc-ws-port=8645 
      --tx-pool-limit-by-account-percentage=1 
      --tx-pool-max-size=4096 
      --metrics-port=9545
      --p2p-port=30303
      --rpc-http-port=8545
      --permissions-accounts-config-file-enabled
      --permissions-nodes-config-file-enabled
    volumes:
      - ./genesis.json:/opt/besu/genesis.json
      - ./Permissioned-Network/Node-1/data:/opt/besu/data
 
  node2:
    image: besu-image-local:1.0
    container_name: node2
    network_mode: "host"
    command: >
      --data-path=/opt/besu/data
      --genesis-file=/opt/besu/genesis.json
      --bootnodes=enode://d9f9e34f10213a92631746a632cfa2eb7c9acbe8189bc1a263a48fba660215e0918a13b7e2c5876f151d87119012b971bf9d5eb198c9a4f73089767d491e3d65@127.0.0.1:30303,enode://3bd77a3c76fc3a536388bf82408a202e0cd3a423541bedae5b0fdc848e4d006b3566f13021ccf4760e82fe31c36c6625e48c3b9c489bca0adb976e5d8278c70c@127.0.0.1:30305
      --rpc-http-enabled
      --rpc-http-api=ETH,NET,QBFT,ADMIN
      --host-allowlist="*"
      --rpc-http-cors-origins="all"
      --profile=ENTERPRISE
      --metrics-enabled
      --rpc-http-host=0.0.0.0
      --rpc-http-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --rpc-ws-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --data-storage-format=BONSAI 
      --tx-pool-min-gas-price=0 
      --min-gas-price=0 
      --rpc-ws-enabled=true 
      --rpc-ws-port=8646 
      --tx-pool-limit-by-account-percentage=1 
      --tx-pool-max-size=4096 
      --metrics-port=9546
      --p2p-port=30304
      --rpc-http-port=8546
      --permissions-accounts-config-file-enabled
      --permissions-nodes-config-file-enabled
    volumes:
      - ./genesis.json:/opt/besu/genesis.json
      - ./Permissioned-Network/Node-2/data:/opt/besu/data

  node3:
    image: besu-image-local:1.0
    container_name: node3
    network_mode: "host"
    command: >
      --data-path=/opt/besu/data
      --genesis-file=/opt/besu/genesis.json
      --rpc-http-enabled
      --rpc-http-api=ETH,NET,QBFT,ADMIN
      --host-allowlist="*"
      --rpc-http-cors-origins="all"
      --profile=ENTERPRISE
      --metrics-enabled
      --rpc-http-host=0.0.0.0
      --rpc-http-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --rpc-ws-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --data-storage-format=BONSAI 
      --tx-pool-min-gas-price=0 
      --min-gas-price=0 
      --rpc-ws-enabled=true 
      --rpc-ws-port=8647 
      --tx-pool-limit-by-account-percentage=1 
      --tx-pool-max-size=4096 
      --metrics-port=9547
      --p2p-port=30305
      --rpc-http-port=8547
      --permissions-accounts-config-file-enabled
      --permissions-nodes-config-file-enabled
    volumes:
      - ./genesis.json:/opt/besu/genesis.json
      - ./Permissioned-Network/Node-3/data:/opt/besu/data

  node4:
    image: besu-image-local:1.0
    container_name: node4
    network_mode: "host"
    command: >
      --data-path=/opt/besu/data
      --genesis-file=/opt/besu/genesis.json
      --bootnodes=enode://d9f9e34f10213a92631746a632cfa2eb7c9acbe8189bc1a263a48fba660215e0918a13b7e2c5876f151d87119012b971bf9d5eb198c9a4f73089767d491e3d65@127.0.0.1:30303,enode://3bd77a3c76fc3a536388bf82408a202e0cd3a423541bedae5b0fdc848e4d006b3566f13021ccf4760e82fe31c36c6625e48c3b9c489bca0adb976e5d8278c70c@127.0.0.1:30305
      --rpc-http-enabled
      --rpc-http-api=ETH,NET,QBFT,ADMIN
      --host-allowlist="*"
      --rpc-http-cors-origins="all"
      --profile=ENTERPRISE
      --metrics-enabled
      --rpc-http-host=0.0.0.0
      --rpc-http-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --rpc-ws-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --data-storage-format=BONSAI 
      --tx-pool-min-gas-price=0 
      --min-gas-price=0 
      --rpc-ws-enabled=true 
      --rpc-ws-port=8648 
      --tx-pool-limit-by-account-percentage=1 
      --tx-pool-max-size=4096 
      --metrics-port=9548
      --p2p-port=30306
      --rpc-http-port=8548
      --permissions-accounts-config-file-enabled
      --permissions-nodes-config-file-enabled
    volumes:
      - ./genesis.json:/opt/besu/genesis.json
      - ./Permissioned-Network/Node-4/data:/opt/besu/data

  node5:
    image: besu-image-local:1.0
    container_name: node5
    network_mode: "host"
    command: >
      --data-path=/opt/besu/data
      --genesis-file=/opt/besu/genesis.json
      --bootnodes=enode://d9f9e34f10213a92631746a632cfa2eb7c9acbe8189bc1a263a48fba660215e0918a13b7e2c5876f151d87119012b971bf9d5eb198c9a4f73089767d491e3d65@127.0.0.1:30303,enode://3bd77a3c76fc3a536388bf82408a202e0cd3a423541bedae5b0fdc848e4d006b3566f13021ccf4760e82fe31c36c6625e48c3b9c489bca0adb976e5d8278c70c@127.0.0.1:30305
      --rpc-http-enabled
      --rpc-http-api=ETH,NET,QBFT,ADMIN
      --host-allowlist="*"
      --rpc-http-cors-origins="all"
      --profile=ENTERPRISE
      --metrics-enabled
      --rpc-http-host=0.0.0.0
      --rpc-http-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --rpc-ws-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --data-storage-format=BONSAI 
      --tx-pool-min-gas-price=0 
      --min-gas-price=0 
      --rpc-ws-enabled=true 
      --rpc-ws-port=8649 
      --tx-pool-limit-by-account-percentage=1 
      --tx-pool-max-size=4096 
      --metrics-port=9549
      --p2p-port=30307
      --rpc-http-port=8549
      --permissions-accounts-config-file-enabled
      --permissions-nodes-config-file-enabled
    volumes:
      - ./genesis.json:/opt/besu/genesis.json
      - ./Permissioned-Network/Node-5/data:/opt/besu/data

  node6:
    image: besu-image-local:1.0
    container_name: node6
    network_mode: "host"
    command: >
      --data-path=/opt/besu/data
      --genesis-file=/opt/besu/genesis.json
      --bootnodes=enode://d9f9e34f10213a92631746a632cfa2eb7c9acbe8189bc1a263a48fba660215e0918a13b7e2c5876f151d87119012b971bf9d5eb198c9a4f73089767d491e3d65@127.0.0.1:30303,enode://3bd77a3c76fc3a536388bf82408a202e0cd3a423541bedae5b0fdc848e4d006b3566f13021ccf4760e82fe31c36c6625e48c3b9c489bca0adb976e5d8278c70c@127.0.0.1:30305
      --rpc-http-enabled
      --rpc-http-api=ETH,NET,QBFT,ADMIN
      --host-allowlist="*"
      --rpc-http-cors-origins="all"
      --profile=ENTERPRISE
      --metrics-enabled
      --rpc-http-host=0.0.0.0
      --rpc-http-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --rpc-ws-api=EEA,WEB3,ETH,NET,TRACE,DEBUG,ADMIN,TXPOOL,PERM,QBFT
      --data-storage-format=BONSAI 
      --tx-pool-min-gas-price=0 
      --min-gas-price=0 
      --rpc-ws-enabled=true 
      --rpc-ws-port=8650
      --tx-pool-limit-by-account-percentage=1 
      --tx-pool-max-size=4096 
      --metrics-port=9550
      --p2p-port=30308
      --rpc-http-port=8550
      --permissions-accounts-config-file-enabled
      --permissions-nodes-config-file-enabled
    volumes:
      - ./genesis.json:/opt/besu/genesis.json
      - ./Permissioned-Network/Node-6/data:/opt/besu/data

networks:
  default:
    name: besu-network
    external: true